var Loader = require('../lib/BulkHtmlLoader');

/**
 * Let's load 500 urls and open a lot of concurrent connections
 * In this example all of the loaded domains are different, so we could potentially open 1000 connections at a time - which would be unwise if all 500 urls sat on the same domain!
 * In a real world example below urls would be digested from a feed or external source and then added to the loader using a loop
 */
var queue = [
    'http://www.facebook.com',
    'http://www.yahoo.com',
    'http://www.live.com',
    'http://www.wikipedia.org',
    'http://www.msn.com',
    'http://www.microsoft.com',
    'http://www.blogspot.com',
    'http://www.baidu.com',
    'http://www.qq.com',
    'http://www.mozilla.com',
    'http://www.sina.com.cn',
    'http://www.wordpress.com',
    'http://www.bing.com',
    'http://www.adobe.com',
    'http://www.163.com',
    'http://www.taobao.com',
    'http://www.soso.com',
    'http://www.twitter.com',
    'http://www.youku.com',
    'http://www.ask.com',
    'http://www.sohu.com',
    'http://www.amazon.com',
    'http://www.windows.com',
    'http://www.ebay.com',
    'http://www.yahoo.co.jp',
    'http://www.myspace.com',
    'http://www.apple.com',
    'http://www.tudou.com',
    'http://www.conduit.com',
    'http://www.hotmail.com',
    'http://www.flickr.com',
    'http://www.photobucket.com',
    'http://www.tianya.cn',
    'http://www.about.com',
    'http://www.cnet.com',
    'http://www.hao123.com',
    'http://www.iefxz.com',
    'http://www.xunlei.com',
    'http://www.paypal.com',
    'http://www.rapidshare.com',
    'http://www.go.com',
    'http://www.fc2.com',
    'http://www.bbc.co.uk',
    'http://www.imdb.com',
    'http://www.orkut.com',
    'http://www.sogou.com',
    'http://www.56.com',
    'http://www.aol.com',
    'http://www.craigslist.org',
    'http://www.rakuten.co.jp',
    'http://www.imageshack.us',
    'http://www.ku6.com',
    'http://www.blogger.com',
    'http://www.goo.ne.jp',
    'http://www.ifeng.com',
    'http://www.linkedin.com',
    'http://www.yandex.ru',
    'http://www.mail.ru',
    'http://www.partypoker.com',
    'http://www.megaupload.com',
    'http://www.answers.com',
    'http://www.alibaba.com',
    'http://www.hi5.com',
    'http://www.cnn.com',
    'http://www.amazon.co.jp',
    'http://www.4shared.com',
    'http://www.ameblo.jp',
    'http://www.gougou.com',
    'http://www.skype.com',
    'http://www.renren.com',
    'http://www.dailymotion.com',
    'http://www.naver.com',
    'http://www.weather.com',
    'http://www.mozilla.org',
    'http://www.mediafire.com',
    'http://www.bit.ly',
    'http://www.hp.com',
    'http://www.livedoor.jp',
    'http://www.ehow.com',
    'http://www.nifty.com',
    'http://www.vkontakte.ru',
    'http://www.alipay.com',
    'http://www.nytimes.com',
    'http://www.overture.com',
    'http://www.sourceforge.net',
    'http://www.fbcdn.net',
    'http://www.xtendmedia.com',
    'http://www.xinhuanet.com',
    'http://www.wikimedia.org',
    'http://www.pconline.com.cn',
    'http://www.daum.net',
    'http://www.4399.com',
    'http://www.bankofamerica.com',
    'http://www.ebay.de',
    'http://www.uol.com.br',
    'http://www.filestube.com',
    'http://www.zol.com.cn',
    'http://www.mop.com',
    'http://www.alexa.com',
    'http://www.biglobe.ne.jp',
    'http://www.brothersoft.com',
    'http://www.scribd.com',
    'http://www.softonic.com',
    'http://www.mapquest.com',
    'http://www.dell.com',
    'http://www.people.com.cn',
    'http://www.kaixin001.com',
    'http://www.geocities.jp',
    'http://www.ebay.co.uk',
    'http://www.hatena.ne.jp',
    'http://www.seesaa.net',
    'http://www.badoo.com',
    'http://www.megavideo.com',
    'http://www.126.com',
    'http://www.paipai.com',
    'http://www.avg.com',
    'http://www.pps.tv',
    'http://www.odnoklassniki.ru',
    'http://www.free.fr',
    'http://www.mywebsearch.com',
    'http://www.infoseek.co.jp',
    'http://www.zynga.com',
    'http://www.depositfiles.com',
    'http://www.metacafe.com',
    'http://www.chase.com',
    'http://www.thepiratebay.org',
    'http://www.kakaku.com',
    'http://www.cctv.com',
    'http://www.optmd.com',
    'http://www.hotfile.com',
    'http://www.com.com',
    'http://www.ning.com',
    'http://www.ocn.ne.jp',
    'http://www.vk.com',
    'http://www.game2.com.cn',
    'http://www.youdao.com',
    'http://www.getpersonas.com',
    'http://www.tripadvisor.com',
    'http://www.nate.com',
    'http://www.livejournal.com',
    'http://www.soufun.com',
    'http://www.zedo.com',
    'http://www.browserchoice.eu',
    'http://www.thefreedictionary.com',
    'http://www.2ch.net',
    'http://www.tinypic.com',
    'http://www.java.com',
    'http://www.narod.ru',
    'http://www.xici.net',
    'http://www.walmart.com',
    'http://www.114la.com',
    'http://www.joy.cn',
    'http://www.addthis.com',
    'http://www.globo.com',
    'http://www.360.cn',
    'http://www.cocolog-nifty.com',
    'http://www.netflix.com',
    'http://www.target.com',
    'http://www.58.com',
    'http://www.cyworld.com',
    'http://www.unionsky.cn',
    'http://www.tom.com',
    'http://www.amazon.de',
    'http://www.netlog.com',
    'http://www.amazon.co.uk',
    'http://www.reference.com',
    'http://www.douban.com',
    'http://www.eastmoney.com',
    'http://www.livedoor.com',
    'http://www.hexun.com',
    'http://www.liveperson.net',
    'http://www.7k7k.com',
    'http://www.miniclip.com',
    'http://www.so-net.ne.jp',
    'http://www.39.net',
    'http://www.nih.gov',
    'http://www.sakura.ne.jp',
    'http://www.rambler.ru',
    'http://www.reuters.com',
    'http://www.kugou.com',
    'http://www.mixi.jp',
    'http://www.terra.com.br',
    'http://www.tripod.com',
    'http://www.mcafee.com',
    'http://www.att.com',
    'http://www.weather.com.cn',
    'http://www.tagged.com',
    'http://www.2345.com',
    'http://www.zing.vn',
    'http://www.exblog.jp',
    'http://www.chinamobile.com',
    'http://www.expedia.com',
    'http://www.ameba.jp',
    'http://www.tinyurl.com',
    'http://www.chinanews.com.cn',
    'http://www.1stwebgame.com',
    'http://www.commentcamarche.net',
    'http://www.allabout.co.jp',
    'http://www.taringa.net',
    'http://www.nicovideo.jp',
    'http://www.domaintools.com',
    'http://www.jugem.jp',
    'http://www.excite.co.jp',
    'http://www.autohome.com.cn',
    'http://www.typepad.com',
    'http://www.ezinearticles.com',
    'http://www.shopping.com',
    'http://www.deviantart.com',
    'http://www.marketgid.com',
    'http://www.ikea.com',
    'http://www.yomiuri.co.jp',
    'http://www.maktoob.com',
    'http://www.web.de',
    'http://www.informharry.com',
    'http://www.alimama.com',
    'http://www.ynet.com',
    'http://www.softpedia.com',
    'http://www.china.com',
    'http://www.6.cn',
    'http://www.5599.net',
    'http://www.cntv.cn',
    'http://www.booking.com',
    'http://www.orange.fr',
    'http://www.advmaker.ru',
    'http://www.verycd.com',
    'http://www.multiply.com',
    'http://www.comcast.net',
    'http://www.ioage.com',
    'http://www.skycn.com',
    'http://www.libero.it',
    'http://www.onet.pl',
    'http://www.rediff.com',
    'http://www.americanexpress.com',
    'http://www.dailymail.co.uk',
    'http://www.alot.com',
    'http://www.nasza-klasa.pl',
    'http://www.pchome.net',
    'http://www.51job.com',
    'http://www.okwave.jp',
    'http://www.70yx.com',
    'http://www.rakuten.ne.jp',
    'http://www.nikkeibp.co.jp',
    'http://www.mlb.com',
    'http://www.huffingtonpost.com',
    'http://www.bestbuy.com',
    'http://www.freelotto.com',
    'http://www.yahoo.net',
    'http://www.docstoc.com',
    'http://www.csdn.net',
    'http://www.digg.com',
    'http://www.macromedia.com',
    'http://www.tumblr.com',
    'http://www.twitpic.com',
    'http://www.impress.co.jp',
    'http://www.foxsports.com',
    'http://www.wikia.com',
    'http://www.t-online.de',
    'http://www.verizonwireless.com',
    'http://www.justin.tv',
    'http://www.ups.com',
    'http://www.wp.pl',
    'http://www.docin.com',
    'http://www.pdfqueen.com',
    'http://www.dangdang.com',
    'http://www.focus.cn',
    'http://www.nextag.com',
    'http://www.ziddu.com',
    'http://www.hubpages.com',
    'http://www.kioskea.net',
    'http://www.babylon.com',
    'http://www.last.fm',
    'http://www.wellsfargo.com',
    'http://www.gmx.net',
    'http://www.friendster.com',
    'http://www.wsj.com',
    'http://www.slideshare.net',
    'http://www.foxnews.com',
    'http://www.ganji.com',
    'http://www.iza.ne.jp',
    'http://www.51.com',
    'http://www.metrolyrics.com',
    'http://www.yesky.com',
    'http://www.usps.com',
    'http://www.alisoft.com',
    'http://www.mainichi.jp',
    'http://www.irs.gov',
    'http://www.bigpoint.com',
    'http://www.china.com.cn',
    'http://www.iciba.com',
    'http://www.hulu.com',
    'http://www.gmarket.co.kr',
    'http://www.tabelog.com',
    'http://www.gamespot.com',
    'http://www.symantec.com',
    'http://www.nokia.com',
    'http://www.pcpop.com',
    'http://www.dion.ne.jp',
    'http://www.torrentz.com',
    'http://www.pptv.com',
    'http://www.telegraph.co.uk',
    'http://www.01net.com',
    'http://www.114la.com',
    'http://www.115.com',
    'http://www.118114.cn',
    'http://www.11st.co.kr',
    'http://www.120ask.com',
    'http://www.123people.com',
    'http://www.126.com',
    'http://www.159game.com',
    'http://www.163.com',
    'http://www.17173.com',
    'http://www.176.com',
    'http://www.19lou.com',
    'http://www.1link.ru',
    'http://www.1stwebgame.com',
    'http://www.1ting.com',
    'http://www.2000y.net',
    'http://www.21cn.com',
    'http://www.2345.com',
    'http://www.24h.com.vn',
    'http://www.265.com',
    'http://www.27.cn',
    'http://www.2ch.net',
    'http://www.360.cn',
    'http://www.360buy.com',
    'http://www.360doc.com',
    'http://www.37cs.com',
    'http://www.39.net',
    'http://www.4399.com',
    'http://www.47news.jp',
    'http://www.4shared.com',
    'http://www.51.com',
    'http://www.51fswd.com',
    'http://www.51job.com',
    'http://www.51mole.com',
    'http://www.51seer.com',
    'http://www.52pk.com',
    'http://www.5599.net',
    'http://www.56.com',
    'http://www.58.com',
    'http://www.5d6d.com',
    'http://www.6.cn',
    'http://www.61.com',
    'http://www.70yx.com',
    'http://www.7k7k.com',
    'http://www.8684.cn',
    'http://www.95599.cn',
    'http://www.9wee.com',
    'http://www.aa.com',
    'http://www.abchina.com',
    'http://www.about.com',
    'http://www.abril.com.br',
    'http://www.accountonline.com',
    'http://www.accuweather.com',
    'http://www.acer.com',
    'http://www.acrobat.com',
    'http://www.addictinggames.com',
    'http://www.addthis.com',
    'http://www.adobe.com',
    'http://www.advmaker.ru',
    'http://www.agame.com',
    'http://www.aibang.com',
    'http://www.alexa.com',
    'http://www.alibaba.com',
    'http://www.alice.it',
    'http://www.alimama.com',
    'http://www.alipay.com',
    'http://www.alisoft.com',
    'http://www.allabout.co.jp',
    'http://www.allegro.pl',
    'http://www.allexperts.com',
    'http://www.allocine.fr',
    'http://www.allrecipes.com',
    'http://www.alot.com',
    'http://www.altervista.org',
    'http://www.amazon.cn',
    'http://www.amazon.co.jp',
    'http://www.amazon.co.uk',
    'http://www.amazon.com',
    'http://www.amazon.de',
    'http://www.amazon.fr',
    'http://www.ameba.jp',
    'http://www.ameblo.jp',
    'http://www.americanexpress.com',
    'http://www.ana.co.jp',
    'http://www.ancestry.com',
    'http://www.angelfire.com',
    'http://www.answerbag.com',
    'http://www.answers.com',
    'http://www.aol.com',
    'http://www.aolnews.com',
    'http://www.apple.com',
    'http://www.appspot.com',
    'http://www.archive.org',
    'http://www.argos.co.uk',
    'http://www.armorgames.com',
    'http://www.articlesbase.com',
    'http://www.asahi-net.or.jp',
    'http://www.asahi.com',
    'http://www.asiae.co.kr',
    'http://www.ask.com',
    'http://www.associatedcontent.com',
    'http://www.att.com',
    'http://www.atwiki.jp',
    'http://www.auction.co.kr',
    'http://www.aufeminin.com',
    'http://www.autohome.com.cn',
    'http://www.autoscout24.de',
    'http://www.autotrader.com',
    'http://www.avast.com',
    'http://www.avg.com',
    'http://www.aweber.com',
    'http://www.azlyrics.com',
    'http://www.babycenter.com',
    'http://www.babylon.com',
    'http://www.badoo.com',
    'http://www.bahn.de',
    'http://www.baidu.com',
    'http://www.baixaki.com.br',
    'http://www.baixing.com',
    'http://www.bandoo.com',
    'http://www.bankofamerica.com',
    'http://www.baofeng.com',
    'http://www.barbie.com',
    'http://www.barnesandnoble.com',
    'http://www.bbc.co.uk',
    'http://www.bdr130.net',
    'http://www.bearshare.com',
    'http://www.bebo.com',
    'http://www.beemp3.com',
    'http://www.best-price.com',
    'http://www.bestbuy.com',
    'http://www.bidders.co.jp',
    'http://www.bigfishgames.com',
    'http://www.biglobe.ne.jp',
    'http://www.bigpoint.com',
    'http://www.bild.de',
    'http://www.bin-layer.de',
    'http://www.bing.com',
    'http://www.bit.ly',
    'http://www.bitauto.com',
    'http://www.bizrate.com',
    'http://www.blackberry.com',
    'http://www.blogbus.com',
    'http://www.blogcu.com',
    'http://www.blogger.com',
    'http://www.blogmura.com',
    'http://www.blogspot.com',
    'http://www.bloomberg.com',
    'http://www.blurtit.com',
    'http://www.boc.cn',
    'http://www.bohelady.com',
    'http://www.bomb-mp3.com',
    'http://www.booking.com',
    'http://www.boosj.com',
    'http://www.boston.com',
    'http://www.break.com',
    'http://www.brothersoft.com',
    'http://www.browserchoice.eu',
    'http://www.btjunkie.org',
    'http://www.businessweek.com',
    'http://www.buy.com',
    'http://www.buzzle.com',
    'http://www.buzznet.com',
    'http://www.ca.gov',
    'http://www.capitalone.com',
    'http://www.careerbuilder.com',
    'http://www.cartoonnetwork.com',
    'http://www.carview.co.jp',
    'http://www.causes.com',
    'http://www.cbsnews.com',
    'http://www.ccb.com.cn',
    'http://www.ccbill.com',
    'http://www.cctv.com',
    'http://www.ce.cn',
    'http://www.changyou.com',
    'http://www.chase.com',
    'http://www.che168.com',
    'http://www.china.com.cn',
    'http://www.china.com',
    'http://www.chinacars.com',
    'http://www.chinadaily.com.cn',
    'http://www.chinahr.com',
    'http://www.chinamobile.com',
    'http://www.chinanews.com.cn',
    'http://www.chinaren.com',
    'http://www.chinaz.com',
    'http://www.chip.de',
    'http://www.chosun.com',
    'http://www.ciao.de',
    'http://www.citibank.com',
    'http://www.citicards.com',
    'http://www.city-data.com',
    'http://www.citysearch.com',
    'http://www.clarin.com',
    'http://www.classmates.com',
    'http://www.clubpenguin.com',
    'http://www.cmbchina.com',
    'http://www.cncmax.cn',
    'http://www.cnet.com'
];

// Create a BulkHtmlLoader instance and start the queue
new Loader()
    .setNumRetries(3)
    .setHttpTimeout(5000)
    .setMaxConcurrentConnections(10)

    /**
     * Optional callback for any status change
     */
    .onChange(function(loaderItem){
        console.log(this.toString() + ' ' + loaderItem.toString()); // [BulkHtmlLoader] progress: {Number}/{Number}, success: {Number}, warnings: {Number}, errors: {Number}, open conn: {Number}, max conn: {Number} [LoaderItem] complete {url}
    })

    /**
     * Final callback once the queue completes
     */
    .load(queue, function(err, loaderItems){

        if(err){
            throw err;
        }

        console.log('done ' + loaderItems.length);

        loaderItems.forEach(function(loaderItem){
            if(loaderItem.getStatus() === Loader.LoaderItem.COMPLETE){
               // Handle results
            }
        });
    });
